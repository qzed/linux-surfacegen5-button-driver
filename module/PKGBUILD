pkgname="surfacegen5-button-driver"
pkgver="0.1.0"
pkgrel=1
pkgdesc="Power- and volume-button driver for 5th generation and later Microsoft Surface devices"
license=('GPL v2')
arch=('x86_64' 'i686')
depends=('dkms')

source=(
    "src::git+https://github.com/qzed/surfacebook2-linux-button-driver.git"
)

sha256sums=('SKIP')

package() {
    cd "${srcdir}/src"

    install -d "${pkgdir}/usr/src/surfacegen5_button-${pkgver}/"
    cp -r "${srcdir}/src/module/Makefile" "${pkgdir}/usr/src/surfacegen5_button-${pkgver}/"
    cp -r "${srcdir}/src/module/dkms.conf" "${pkgdir}/usr/src/surfacegen5_button-${pkgver}/"
    cp -r "${srcdir}/src/module/surfacegen5_button.c" "${pkgdir}/usr/src/surfacegen5_button-${pkgver}/"

    install -Dm644 "${srcdir}/src/module/surfacegen5_button.conf" "${pkgdir}/usr/lib/depmod.d/surfacegen5_button.conf"
}
